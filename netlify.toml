[build]
  command = "hugo"
  functions = "api"
  publish = "public"

[build.environment]
  HUGO_VERSION = "0.93.3"

[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200

[[headers]]
  for = "/*"
    [headers.values]
      # Enable cross-origin isolation (required for WASM)
      Cross-Origin-Embedder-Policy = "require-corp"
      Cross-Origin-Opener-Policy = "same-origin"
      
      # CORS headers for your assets
      Access-Control-Allow-Origin = "*"
      Access-Control-Allow-Methods = "GET, POST, OPTIONS"
      Access-Control-Allow-Headers = "*"
      
      # Required for resources to be loaded in cross-origin isolated context
      Cross-Origin-Resource-Policy = "cross-origin"

[[headers]]
  for = "/video/*"
    [headers.values]
      # Specific headers for video files to allow cross-origin access
      Cross-Origin-Resource-Policy = "cross-origin"
      Access-Control-Allow-Origin = "*"