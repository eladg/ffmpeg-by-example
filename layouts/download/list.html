{{ define "main" }}
<article>
    <div class="purple-border homepage-top-message">
        There are many ways to install FFmpegs.<br/><br/>The following is a simple walkthough guide on how to install it.
    </div>
    <div class="download-page">
        <div>
            <h1>How to install FFmpeg?</h1>
            <button>Download</button>
            <button>Package Manager</button>
            <button>Sources</button>
            <h1>How to install FFmpeg?</h1>
            <button>Linux</button>
            <button>Windows</button>
            <button>MacOS</button>
            <h1>Package Manager - Linux</h1>
            <code>
                sudo apt update && apt install ffmpeg
            </code>
        </div>
        <div>
            <h1>FFmpeg Sources</h1>
            {{ $json := resources.GetMatch "ffmpeg-sources.json" }}
            {{ if $json }}
                {{ $releases := $json | unmarshal }}
                {{ $sortedReleases := slice }}
                {{ range $version, $release := $releases }}
                    {{ $parts := split $version "." }}
                    {{ $major := int (index $parts 0) }}
                    {{ $minor := int (index $parts 1) }}
                    {{ $patch := int (index $parts 2) }}
                    {{ $sortKey := printf "%03d%03d%03d" $major $minor $patch }}
                    {{ $sortedReleases = $sortedReleases | append (dict 
                        "version" $version 
                        "sortKey" $sortKey
                        "release" $release
                    ) }}
                {{ end }}
                {{ $sortedReleases = sort $sortedReleases "sortKey" "desc" }}
                
                <div>
                    <ul class="posts-list">
                        {{ range $sortedReleases }}
                            <li style="list-style: none; margin-bottom: 5px;">
                                <a href="{{ .release.download_xz_tarball }}">{{ replace .release.name "FFmpeg " "" }}</a>
                            </li>
                        {{ end }}
                    </ul>
                </div>
            {{ else }}
                <div class="alert alert-info">
                    <p>Release information is currently being updated. Please check back soon.</p>
                </div>
            {{ end }}
        </div>
    </div>
</article>
{{ end }}